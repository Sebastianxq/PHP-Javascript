!function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return s(i?i:t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?window.navigator.userAgent:arguments[0];n(this,t);var i=e.toLowerCase();this.isEdge=/\sedge\//.test(i),this.isChrome=!this.isEdge&&/chrome/.test(i),this.isSafari=!this.isEdge&&!this.isChrome&&/safari/.test(i),this.isFirefox=!this.isEdge&&!this.isChrome&&!this.isSafari&&/firefox/.test(i),this.isIE=!this.isEdge&&!this.isChrome&&!this.isSafari&&!this.isFirefox&&/trident|msie/.test(i),this.isMobile=/mobile/.test(i),this.isAndroid=this.isMobile&&/android/.test(i),this.isiOS=this.isMobile&&/iphone|ipad|ipod/.test(i),this.isEdgeHTML=this.isEdge,this.isWebKit=!this.isEdgeHTML&&/applewebkit/.test(i)&&!/edge/.test(i),this.isTrident=!this.isEdgeHTML&&!this.isWebKit&&/trident/.test(i),this.isGecko=!this.isEdgeHTML&&!this.isWebKit&&!this.isTrident&&/gecko/.test(i),this.isEdge?this.engineVersion=i.match(/(?:edge).(\d+)/):(this.version=i.match(/(?:chrome|version|firefox|msie|rv).(\d+)\.(\d+)/),this.engineVersion=i.match(/(?:applewebkit|gecko|trident).(\d+)/)),this.version&&(this.majorVersion=parseInt(this.version[1],10),this.minorVersion=parseInt(this.version[2],10)),this.engineVersion&&(this.engineMajorVersion=parseInt(this.engineVersion[1],10)),this.isChromeOS=!this.isMobile&&/CrOS/.test(i),this.ismacOS=!this.isMobile&&/macintosh/.test(i),this.isLinux=!this.isMobile&&/linux/.test(i),this.isTizen=/tizen/.test(i),this.isWebOS=/web0s|webos/.test(i),this.isWindows=!this.isMobile&&/windows/.test(i)}return s(t,[{key:"couldSupportScheme",value:function(t){var e=!1;switch(t){case"apple-music":e=this.isAndroid;break;case"itms":e=this.ismacOS||this.isWindows;break;case"itms-books":e=this.ismacOS||this.isiOS;break;case"itms-itunesu":e=this.isiOS;break;case"itms-apps":case"itms-podcast":case"itms-messages":case"itms-watch":case"music":e=this.isiOS;break;case"macappstore":e=this.ismacOS}return e}}]),t}();i["default"]=r},{}],2:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../helpers/url"),o={app:["8"],book:["11","13"],"mac-app":["12"],podcast:["2"]},a={book:/\/book\//,course:/\/course\//,"mac-app":/\/mac-app\//,music:/\/(album|artist|music-video|show|episode)\//,podcast:/\/podcast\//},u=function(){function t(e){n(this,t);var i=(0,r.parseURL)(e),s=i.pathname,o=i.protocol,a=i.search;this.pathname=s,this.protocol=o,this.query=(0,r.parseSearch)(a),this.url=e}return s(t,null,[{key:"forURL",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e.isAndroid||!1,n=e.isMobile||!1,s=new this(t);if(!/https?:/.test(s.protocol))return s.protocol;if(n){if(s.isApps)return"itms-apps";if(s.isWatch)return"itms-watch";if(s.isPodcast)return"itms-podcast";if(s.isMessage)return"itms-messages";if(s.isMusic)return i?"apple-music":"music"}return s.isBook?"itms-books":s.isCobalt?"itms-itunesu":s.isMacApp?"macappstore":"itms"}}]),s(t,[{key:"_is",value:function(t){var e=this.query.app&&this.query.app===t,i=!1,n=!1;return o[t]&&(i=o[t].indexOf(this.query.mt)!==-1),a[t]&&(n=a[t].test(this.pathname)),e||i||n}},{key:"isApps",get:function(){return o.app.indexOf(this.query.mt)!==-1&&!this.isMessages&&!this.isWatch}},{key:"isBook",get:function(){return this._is("book")}},{key:"isCobalt",get:function(){return this._is("course")}},{key:"isMacApp",get:function(){return this._is("mac-app")}},{key:"isMessages",get:function(){return this._is("messages")}},{key:"isMusic",get:function(){return this._is("music")}},{key:"isPodcast",get:function(){return this._is("podcast")}},{key:"isWatch",get:function(){return this._is("watch")}}]),t}();i["default"]=u},{"../helpers/url":4}],3:[function(t,e,i){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?r:arguments[0],e=arguments.length<=1||void 0===arguments[1]?document.body:arguments[1],i=t;return"string"==typeof t&&(i=document.createElement("iframe"),i.id=t,i.style.display="none"),e.appendChild(i),i}function s(){var t=arguments.length<=0||void 0===arguments[0]?r:arguments[0],e=arguments.length<=1||void 0===arguments[1]?document.body:arguments[1],i=t;"string"==typeof t&&(i=document.getElementById(t)),i&&e.removeChild(i)}i.appendFrame=n,i.removeFrame=s;var r="client-detect-frame";i.FRAME_ID=r},{}],4:[function(t,e,i){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e={},i=t.match(o)||[];return i.forEach(function(t){var i=t.split("="),n=r(i,2),s=n[0],o=n[1];e[s]=o}),e}function s(t){var e=document.createElement("a");return e.href=t,{hash:e.hash,hostname:e.hostname,pathname:e.pathname,protocol:e.protocol,search:e.search}}var r=function(){function t(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(u){s=!0,r=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(s)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();i.parseSearch=n,i.parseURL=s;var o=/([^?&=]+)=?([^&]*)/g},{}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){t.ClientDetect=d}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();i.registerGlobal=s;var o=t("./detect/browser"),a=t("./detect/scheme"),u=t("./launch"),c=1,l=0,h=-1,d=function(){function t(){n(this,t)}return r(t,null,[{key:"browser",value:function(){return new o["default"]}},{key:"couldHaveAppStore",value:function(){return(new o["default"]).couldSupportScheme("itms-apps")}},{key:"couldHaveBookStore",value:function(){return(new o["default"]).couldSupportScheme("itms-books")}},{key:"couldHaveiTunes",value:function(){return(new o["default"]).couldSupportScheme("itms")}},{key:"couldHaveiTunesU",value:function(){return(new o["default"]).couldSupportScheme("itms-itunesu")}},{key:"couldHaveMacAppStore",value:function(){return(new o["default"]).couldSupportScheme("macappstore")}},{key:"couldHaveMessages",value:function(){return(new o["default"]).couldSupportScheme("itms-messages")}},{key:"couldHaveMusic",value:function(){var t=new o["default"];return t.couldSupportScheme("music")||t.couldSupportScheme("apple-music")}},{key:"couldHavePodcasts",value:function(){return(new o["default"]).couldSupportScheme("itms-podcast")}},{key:"couldHaveWatch",value:function(){return(new o["default"]).couldSupportScheme("itms-watch")}},{key:"launchClient",value:function(t,e){function i(){e(c,s,f)}function n(){e(l,s,f)}var s=new o["default"],r=a["default"].forURL(t,s),d=s.isAndroid?/^https?/:/^http/,f=t.replace(d,r);return"function"!=typeof e?window.location.href=f:(navigator.msLaunchUri?navigator.msLaunchUri(f,i,n):s.isChrome?u["default"].chrome(f,i,n):s.isFirefox?u["default"].firefox(f,i,n):s.isIE?u["default"].ie(f,i,n):s.isiOS?u["default"].ios(f,i,n):u["default"]["default"](f,function(){e(h,s,f)}),{scheme:r,href:f})}}]),t}();i.ClientDetect=d,i["default"]=d},{"./detect/browser":1,"./detect/scheme":2,"./launch":10}],6:[function(t,e,i){"use strict";i["default"]=function(t){function e(){window.clearTimeout(s),window.removeEventListener("blur",e),i()}var i=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],n=arguments.length<=2||void 0===arguments[2]?Function():arguments[2];window.addEventListener("blur",e);var s=window.setTimeout(function(){window.removeEventListener("blur",e),n()},250);window.location.href=t}},{}],7:[function(t,e,i){"use strict";var n=t("../helpers/dom");i["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],i=(0,n.appendFrame)();i.contentWindow.location.href=t,window.setTimeout(function(){(0,n.removeFrame)(i),e()},250)}},{"../helpers/dom":3}],8:[function(t,e,i){"use strict";var n=t("../helpers/dom");i["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],i=arguments.length<=2||void 0===arguments[2]?Function():arguments[2],s=(0,n.appendFrame)();try{s.contentWindow.location.href=t,e()}catch(r){i()}finally{(0,n.removeFrame)()}}},{"../helpers/dom":3}],9:[function(t,e,i){"use strict";var n="client-detect-popup";i.POPUP_ID=n,i["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],i=arguments.length<=2||void 0===arguments[2]?Function():arguments[2],s="about:blank",r=window.open("",n,"height=0,width=0");r.location.href=t;try{!function(){r.location.href=s,e();var t=window.setInterval(function(){r.close(),r.closed&&window.clearInterval(t)},250)}()}catch(o){r=window.open(s,n),r.close(),i()}}},{}],10:[function(t,e,i){"use strict";var n=t("./default"),s=t("./chrome"),r=t("./firefox"),o=t("./ie"),a=t("./ios");i["default"]={chrome:s["default"],firefox:r["default"],ie:o["default"],ios:a["default"],"default":n["default"]}},{"./chrome":6,"./default":7,"./firefox":8,"./ie":9,"./ios":11}],11:[function(t,e,i){"use strict";i["default"]=function(t){var e=arguments.length<=1||void 0===arguments[1]?Function():arguments[1],i=arguments.length<=2||void 0===arguments[2]?Function():arguments[2];try{top.window.location.href=t,e()}catch(n){i()}}},{}],12:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("@apple/client-detect").ClientDetect,o=r.browser(),a={dataAttr:"data-download-button",dataAttrDisclaimer:"data-download-disclaimer"},u=function(){function t(e){n(this,t),e=e||{},this.options=Object.assign({},a,e),this.buttons=[].slice.call(document.querySelectorAll("["+this.options.dataAttr+"]")),this.disclaimers=[].slice.call(document.querySelectorAll("["+this.options.dataAttrDisclaimer+"]")),this.handleBtnClick=this._handleBtnClick.bind(this),this._handleDisclaimers()}return s(t,[{key:"initialize",value:function(){for(var t=0,e=this.buttons.length;t<e;t++)this.buttons[t].addEventListener("click",this.handleBtnClick)}},{key:"destroy",value:function(){for(var t=0,e=this.buttons.length;t<e;t++)this.buttons[t].removeEventListener("click",this.handleBtnClick)}},{key:"addButton",value:function(t){this.buttons.push(t),this._addEventListener(t)}},{key:"removeButton",value:function(t){this.buttons=this.buttons.filter(function(e){return e!==t}),this._removeEventListener(t)}},{key:"_handleBtnClick",value:function(t){t.preventDefault();var e=t.target,i=e.dataset.url,n=e.dataset.windowsFallback||"/itunes/download/",s=e.dataset.androidFallback||"intent://scan/#Intent;scheme=apple-music;package=com.apple.android.music;end";i&&r.launchClient(i,function(t,e){t!==-1&&0!==t||(e.isAndroid!==!0&&e.isLinux!==!0||(window.location.href=s),e.isWindows===!0&&(window.location.href=n))})}},{key:"_addEventListener",value:function(t){t.addEventListener("click",this.handleBtnClick)}},{key:"_removeEventListener",value:function(t){t.removeEventListener("click",this.handleBtnClick)}},{key:"_handleDisclaimers",value:function(){for(var t=0,e=this.disclaimers.length;t<e;t++){var i=this.disclaimers[t].getAttribute(this.options.dataAttrDisclaimer);if(i){i=JSON.parse(i);var n=this._titleCaseStr(i.browser);n&&!!o["is"+n]==!0&&(this.disclaimers[t].classList.remove("visuallyhidden"),this.disclaimers[t].setAttribute("aria-hidden","false"))}}}},{key:"_titleCaseStr",value:function(t){if(!t)return!1;t=t.toLowerCase().split(" ");for(var e=0,i=t.length;e<i;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join("")}}]),t}();e.exports=u},{"@apple/client-detect":5}],13:[function(t,e,i){"use strict";var n=t("@marcom/client-detect"),s=function(){return{initialize:function(){var t=new n;return t.initialize(),this}}}();e.exports=s.initialize()},{"@marcom/client-detect":12}]},{},[13]);